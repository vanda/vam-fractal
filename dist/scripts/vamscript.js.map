{"version":3,"sources":["src/assets/scripts/node_modules/browser-pack/_prelude.js","src/assets/scripts/node_modules/browser-cookies/src/browser-cookies.js","src/assets/scripts/node_modules/querystring-es3/decode.js","src/assets/scripts/node_modules/querystring-es3/encode.js","src/assets/scripts/node_modules/querystring-es3/index.js","src/assets/scripts/node_modules/svg4everybody/dist/svg4everybody.js","src/assets/scripts/src/assets/scripts/vam-scripts.js","src/assets/scripts/src/components/blocks/background-video/_background-video.js","src/assets/scripts/src/components/blocks/cookie-banner/_cookie-banner.js","src/assets/scripts/src/components/blocks/modal/_modal.js","src/assets/scripts/src/components/blocks/newsletter-signup/_newsletter-signup.js","src/assets/scripts/src/components/blocks/object-image-overlay/_object-image-overlay.js","src/assets/scripts/src/components/blocks/object-shuffler/_object-shuffler.js","src/assets/scripts/src/components/blocks/search-form/_search-form.js","src/assets/scripts/src/components/blocks/search-result/_search-result.js","src/assets/scripts/src/components/blocks/toggle-nav/_toggle-nav.js","src/assets/scripts/src/components/blocks/video-thumbnail/_video-thumbnail.js","src/assets/scripts/src/components/blocks/video-trailer/_video-trailer.js","src/assets/scripts/src/components/groups/block-grid/_grid-reveal-more.js","src/assets/scripts/src/components/services/object_fit_polyfill/_poly-object-fit.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","defaults","set","name","value","options","opts","expires","domain","path","undefined","secure","httponly","samesite","expDate","Date","getTime","document","cookie","replace","encodeURIComponent","toUTCString","get","cookies","split","pop","separatorIndex","indexOf","decodeURIComponent","slice","erase","all","qs","sep","eq","obj","regexp","maxKeys","prop","len","kstr","vstr","k","v","x","idx","substr","Object","prototype","hasOwnProperty","isArray","push","Array","xs","toString","stringifyPrimitive","isFinite","map","objectKeys","ks","join","res","keys","key","decode","parse","encode","stringify","root","factory","this","embed","parent","svg","target","fragment","createDocumentFragment","viewBox","hasAttribute","getAttribute","setAttribute","clone","cloneNode","childNodes","appendChild","firstChild","loadreadystatechange","xhr","onreadystatechange","readyState","cachedDocument","_cachedDocument","implementation","createHTMLDocument","body","innerHTML","responseText","_cachedTarget","_embeds","splice","item","id","getElementById","getSVGAncestor","node","nodeName","toLowerCase","parentNode","rawopts","polyfill","inIframe","window","top","self","test","navigator","userAgent","match","requests","requestAnimationFrame","setTimeout","uses","getElementsByTagName","numberOfSvgUseElementsToBypass","oninterval","index","use","src","attributeName","validate","removeChild","srcSplit","url","shift","XMLHttpRequest","open","send","define","amd","svg4everybody","_svg4everybody","_svg4everybody2","default","backgroundVideo","querySelector","backgroundVideoContainer","stopButton","videoCredit","imageCredit","playCounter","showVideoCredit","classList","remove","add","hideVideoCredit","addEventListener","pause","pauseHiddenVideo","offsetHeight","play","onclick","paused","cookieBanner","closeButton","onload","event","preventDefault","_browserCookies","modals","querySelectorAll","modalTracking","category","action","dataLayer","from","modal","modalCampaign","dataset","modalOnceOnly","_browserCookies2","modalDomain","modalAction","textContent","signupForm","emailField","emailDescriptor","emailBtn","httpRequest","formInputs","submit","ip","DONE","status","setRequestHeader","oicSeeds","oic","createElement","items","addItem","prepend","arguments","seed","data","objectImageOverlay","JSON","museumNumber","copyright","numberCopyright","onDisplay","locationCopy","displayOverride","locationSite","locationRoom","storageOverride","visitLink","visitUrl","location","objectUrl","href","ctaScreen","ctaMobile","alt","srcset","insertBefore","firstElementChild","itemPrev","itemNext","getIndex","findIndex","el","clipItem","lastElementChild","advance","rewind","_index","track","object","trim","closest","focus","keyHandle","e3","e2","matches","removeEventListener","shuffler","init","shufflerData","objectShuffler","deckTemplate","itemTemplate","imgTemplate","slideSize","setSize","transitionDurationItem","parseFloat","getComputedStyle","getPropertyValue","transitionDurationImg","deckTabs","_i","removeAttribute","deck","_props","itemsData","itemsDataFeed","feed","itemsIndex","tabLink","className","title","getData","then","slide","j","newSlide","nextSlide","Math","floor","getBoundingClientRect","width","dataURI","fetch","response","json","records","record","imgPath","fields","primary_image_id","substring","img","object_number","catch","err","console","log","Promise","resolve","children","dataIndex","scaler","random","scale","slot","yDir","xDir","y","jitterX","jitterY","style","height","position","left","transitionDuration","active","nextSibling","observer","IntersectionObserver","_ref","_slicedToArray","intersectionRatio","myComponent","unobserve","initialised","rootMargin","observe","searchInput","searchUnderscore","searchSubmit","searchClear","searchDecorate","searchResultTextEls","searchResultTextTruncate","textEl","textFull","scrollHeight","clientHeight","maxChars","shunt","firstChar","lastChar","lastIndexOf","bind","_querystring","toggleNav","toggleNavBtns","qsToggleType","_querystring2","search","type","tog","tnToggees","toggeesSelector","togType","toggleType","scrollLeft","offsetLeft","preventHistoryPush","history","pushState","toggleNavType","click","state","toggleTypeDefault","videoThumbs","vidThumb","popup","popupClose","videoTrailer","previewImage","offsetWidth","gridRevealMore","gridBlock","noOfItemsToShow","revealMoreCounter","childElementCount","svgURL","iconUrl","gridItems","concat","_toConsumableArray","theme","revealMoreTheme","tracking","revealMoreTracking","putAfter","revealMorePutAfter","forEach","gridFooterMarkup","revealMoreClicks","hiddenItems","filter","contains","replaceState","buttons","Modernizr","on","objectFitContainer","els","imgEl","imgUrl","backgroundImage"],"mappings":"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","file":"vamscript.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","exports.defaults = {};\r\rexports.set = function(name, value, options) {\r// Retrieve options and defaults\rvar opts = options || {};\rvar defaults = exports.defaults;\r\r// Apply default value for unspecified options\rvar expires  = opts.expires  || defaults.expires;\rvar domain   = opts.domain   || defaults.domain;\rvar path     = opts.path     !== undefined ? opts.path     : (defaults.path !== undefined ? defaults.path : '/');\rvar secure   = opts.secure   !== undefined ? opts.secure   : defaults.secure;\rvar httponly = opts.httponly !== undefined ? opts.httponly : defaults.httponly;\rvar samesite = opts.samesite !== undefined ? opts.samesite : defaults.samesite;\r\r// Determine cookie expiration date\r// If succesful the result will be a valid Date, otherwise it will be an invalid Date or false(ish)\rvar expDate = expires ? new Date(\r// in case expires is an integer, it should specify the number of days till the cookie expires\rtypeof expires === 'number' ? new Date().getTime() + (expires * 864e5) :\r// else expires should be either a Date object or in a format recognized by Date.parse()\rexpires\r) : 0;\r\r// Set cookie\rdocument.cookie = name.replace(/[^+#$&^`|]/g, encodeURIComponent)                // Encode cookie name\r.replace('(', '%28')\r.replace(')', '%29') +\r'=' + value.replace(/[^+#$&/:<-\\[\\]-}]/g, encodeURIComponent) +                  // Encode cookie value (RFC6265)\r(expDate && expDate.getTime() >= 0 ? ';expires=' + expDate.toUTCString() : '') + // Add expiration date\r(domain   ? ';domain=' + domain     : '') +                                      // Add domain\r(path     ? ';path='   + path       : '') +                                      // Add path\r(secure   ? ';secure'               : '') +                                      // Add secure option\r(httponly ? ';httponly'             : '') +                                      // Add httponly option\r(samesite ? ';samesite=' + samesite : '');                                       // Add samesite option\r};\r\rexports.get = function(name) {\rvar cookies = document.cookie.split(';');\r\r// Iterate all cookies\rwhile(cookies.length) {\rvar cookie = cookies.pop();\r\r// Determine separator index (\"name=value\")\rvar separatorIndex = cookie.indexOf('=');\r\r// IE<11 emits the equal sign when the cookie value is empty\rseparatorIndex = separatorIndex < 0 ? cookie.length : separatorIndex;\r\rvar cookie_name = decodeURIComponent(cookie.slice(0, separatorIndex).replace(/^\\s+/, ''));\r\r// Return cookie value if the name matches\rif (cookie_name === name) {\rreturn decodeURIComponent(cookie.slice(separatorIndex + 1));\r}\r}\r\r// Return `null` as the cookie was not found\rreturn null;\r};\r\rexports.erase = function(name, options) {\rexports.set(name, '', {\rexpires:  -1,\rdomain:   options && options.domain,\rpath:     options && options.path,\rsecure:   0,\rhttponly: 0}\r);\r};\r\rexports.all = function() {\rvar all = {};\rvar cookies = document.cookie.split(';');\r\r// Iterate all cookies\rwhile(cookies.length) {\rvar cookie = cookies.pop();\r\r// Determine separator index (\"name=value\")\rvar separatorIndex = cookie.indexOf('=');\r\r// IE<11 emits the equal sign when the cookie value is empty\rseparatorIndex = separatorIndex < 0 ? cookie.length : separatorIndex;\r\r// add the cookie name and value to the `all` object\rvar cookie_name = decodeURIComponent(cookie.slice(0, separatorIndex).replace(/^\\s+/, ''));\rall[cookie_name] = decodeURIComponent(cookie.slice(separatorIndex + 1));\r}\r\rreturn all;\r};\r","// Copyright Joyent, Inc. and other Node contributors.//// Permission is hereby granted, free of charge, to any person obtaining a// copy of this software and associated documentation files (the// \"Software\"), to deal in the Software without restriction, including// without limitation the rights to use, copy, modify, merge, publish,// distribute, sublicense, and/or sell copies of the Software, and to permit// persons to whom the Software is furnished to do so, subject to the// following conditions://// The above copyright notice and this permission notice shall be included// in all copies or substantial portions of the Software.//// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE// USE OR OTHER DEALINGS IN THE SOFTWARE.'use strict';// If obj.hasOwnProperty has been overridden, then calling// obj.hasOwnProperty(prop) will break.// See: https://github.com/joyent/node/issues/1707function hasOwnProperty(obj, prop) {return Object.prototype.hasOwnProperty.call(obj, prop);}module.exports = function(qs, sep, eq, options) {sep = sep || '&';eq = eq || '=';var obj = {};if (typeof qs !== 'string' || qs.length === 0) {return obj;}var regexp = /\\+/g;qs = qs.split(sep);var maxKeys = 1000;if (options && typeof options.maxKeys === 'number') {maxKeys = options.maxKeys;}var len = qs.length;// maxKeys <= 0 means that we should not limit keys countif (maxKeys > 0 && len > maxKeys) {len = maxKeys;}for (var i = 0; i < len; ++i) {var x = qs[i].replace(regexp, '%20'),idx = x.indexOf(eq),kstr, vstr, k, v;if (idx >= 0) {kstr = x.substr(0, idx);vstr = x.substr(idx + 1);} else {kstr = x;vstr = '';}k = decodeURIComponent(kstr);v = decodeURIComponent(vstr);if (!hasOwnProperty(obj, k)) {obj[k] = v;} else if (isArray(obj[k])) {obj[k].push(v);} else {obj[k] = [obj[k], v];}}return obj;};var isArray = Array.isArray || function (xs) {return Object.prototype.toString.call(xs) === '[object Array]';};","// Copyright Joyent, Inc. and other Node contributors.//// Permission is hereby granted, free of charge, to any person obtaining a// copy of this software and associated documentation files (the// \"Software\"), to deal in the Software without restriction, including// without limitation the rights to use, copy, modify, merge, publish,// distribute, sublicense, and/or sell copies of the Software, and to permit// persons to whom the Software is furnished to do so, subject to the// following conditions://// The above copyright notice and this permission notice shall be included// in all copies or substantial portions of the Software.//// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE// USE OR OTHER DEALINGS IN THE SOFTWARE.'use strict';var stringifyPrimitive = function(v) {switch (typeof v) {case 'string':return v;case 'boolean':return v ? 'true' : 'false';case 'number':return isFinite(v) ? v : '';default:return '';}};module.exports = function(obj, sep, eq, name) {sep = sep || '&';eq = eq || '=';if (obj === null) {obj = undefined;}if (typeof obj === 'object') {return map(objectKeys(obj), function(k) {var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;if (isArray(obj[k])) {return map(obj[k], function(v) {return ks + encodeURIComponent(stringifyPrimitive(v));}).join(sep);} else {return ks + encodeURIComponent(stringifyPrimitive(obj[k]));}}).join(sep);}if (!name) return '';return encodeURIComponent(stringifyPrimitive(name)) + eq +encodeURIComponent(stringifyPrimitive(obj));};var isArray = Array.isArray || function (xs) {return Object.prototype.toString.call(xs) === '[object Array]';};function map (xs, f) {if (xs.map) return xs.map(f);var res = [];for (var i = 0; i < xs.length; i++) {res.push(f(xs[i], i));}return res;}var objectKeys = Object.keys || function (obj) {var res = [];for (var key in obj) {if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);}return res;};","'use strict';exports.decode = exports.parse = require('./decode');exports.encode = exports.stringify = require('./encode');","!function(root, factory) {\"function\" == typeof define && define.amd ? // AMD. Register as an anonymous module unless amdModuleId is setdefine([], function() {return root.svg4everybody = factory();}) : \"object\" == typeof module && module.exports ? // Node. Does not work with strict CommonJS, but// only CommonJS-like environments that support module.exports,// like Node.module.exports = factory() : root.svg4everybody = factory();}(this, function() {/*! svg4everybody v2.1.9 | github.com/jonathantneal/svg4everybody */function embed(parent, svg, target) {// if the target existsif (target) {// create a document fragment to hold the contents of the targetvar fragment = document.createDocumentFragment(), viewBox = !svg.hasAttribute(\"viewBox\") && target.getAttribute(\"viewBox\");// conditionally set the viewBox on the svgviewBox && svg.setAttribute(\"viewBox\", viewBox);// copy the contents of the clone into the fragmentfor (// clone the targetvar clone = target.cloneNode(!0); clone.childNodes.length; ) {fragment.appendChild(clone.firstChild);}// append the fragment into the svgparent.appendChild(fragment);}}function loadreadystatechange(xhr) {// listen to changes in the requestxhr.onreadystatechange = function() {// if the request is readyif (4 === xhr.readyState) {// get the cached html documentvar cachedDocument = xhr._cachedDocument;// ensure the cached html document based on the xhr responsecachedDocument || (cachedDocument = xhr._cachedDocument = document.implementation.createHTMLDocument(\"\"), cachedDocument.body.innerHTML = xhr.responseText, xhr._cachedTarget = {}), // clear the xhr embeds list and embed each itemxhr._embeds.splice(0).map(function(item) {// get the cached targetvar target = xhr._cachedTarget[item.id];// ensure the cached targettarget || (target = xhr._cachedTarget[item.id] = cachedDocument.getElementById(item.id)), // embed the target into the svgembed(item.parent, item.svg, target);});}}, // test the ready state change immediatelyxhr.onreadystatechange();}function svg4everybody(rawopts) {function oninterval() {// while the index exists in the live <use> collectionfor (// get the cached <use> indexvar index = 0; index < uses.length; ) {// get the current <use>var use = uses[index], parent = use.parentNode, svg = getSVGAncestor(parent), src = use.getAttribute(\"xlink:href\") || use.getAttribute(\"href\");if (!src && opts.attributeName && (src = use.getAttribute(opts.attributeName)), svg && src) {if (polyfill) {if (!opts.validate || opts.validate(src, svg, use)) {// remove the <use> elementparent.removeChild(use);// parse the src and get the url and idvar srcSplit = src.split(\"#\"), url = srcSplit.shift(), id = srcSplit.join(\"#\");// if the link is externalif (url.length) {// get the cached xhr requestvar xhr = requests[url];// ensure the xhr request existsxhr || (xhr = requests[url] = new XMLHttpRequest(), xhr.open(\"GET\", url), xhr.send(), xhr._embeds = []), // add the svg and id as an item to the xhr embeds listxhr._embeds.push({parent: parent,svg: svg,id: id}), // prepare the xhr ready state change eventloadreadystatechange(xhr);} else {// embed the local id into the svgembed(parent, svg, document.getElementById(id));}} else {// increase the index when the previous value was not \"valid\"++index, ++numberOfSvgUseElementsToBypass;}}} else {// increase the index when the previous value was not \"valid\"++index;}}// continue the interval(!uses.length || uses.length - numberOfSvgUseElementsToBypass > 0) && requestAnimationFrame(oninterval, 67);}var polyfill, opts = Object(rawopts), newerIEUA = /\\bTrident\\/[567]\\b|\\bMSIE (?:9|10)\\.0\\b/, webkitUA = /\\bAppleWebKit\\/(\\d+)\\b/, olderEdgeUA = /\\bEdge\\/12\\.(\\d+)\\b/, edgeUA = /\\bEdge\\/.(\\d+)\\b/, inIframe = window.top !== window.self;polyfill = \"polyfill\" in opts ? opts.polyfill : newerIEUA.test(navigator.userAgent) || (navigator.userAgent.match(olderEdgeUA) || [])[1] < 10547 || (navigator.userAgent.match(webkitUA) || [])[1] < 537 || edgeUA.test(navigator.userAgent) && inIframe;// create xhr requests objectvar requests = {}, requestAnimationFrame = window.requestAnimationFrame || setTimeout, uses = document.getElementsByTagName(\"use\"), numberOfSvgUseElementsToBypass = 0;// conditionally start the interval if the polyfill is activepolyfill && oninterval();}function getSVGAncestor(node) {for (var svg = node; \"svg\" !== svg.nodeName.toLowerCase() && (svg = svg.parentNode); ) {}return svg;}return svg4everybody;});","import svg4everybody from 'svg4everybody';require('../../components/services/object_fit_polyfill/_poly-object-fit.js');require('../../components/blocks/background-video/_background-video.js');require('../../components/groups/block-grid/_grid-reveal-more.js');require('../../components/blocks/cookie-banner/_cookie-banner.js');require('../../components/blocks/object-image-overlay/_object-image-overlay.js');require('../../components/blocks/object-shuffler/_object-shuffler.js');require('../../components/blocks/modal/_modal.js');require('../../components/blocks/newsletter-signup/_newsletter-signup.js');require('../../components/blocks/search-form/_search-form.js');require('../../components/blocks/search-result/_search-result.js');require('../../components/blocks/toggle-nav/_toggle-nav.js');require('../../components/blocks/video-thumbnail/_video-thumbnail.js');require('../../components/blocks/video-trailer/_video-trailer.js');svg4everybody();","const backgroundVideo = document.querySelector('.js-background-video');if (backgroundVideo) {const backgroundVideoContainer = document.querySelector('.js-background-video-container');const stopButton = document.querySelector('.js-stop-button');const timesToLoop = 20;const videoCredit = document.querySelector('.js-background-video-credit');const imageCredit = document.querySelector('.js-background-image-credit');let playCounter = 0;const showVideoCredit = () => {if (videoCredit) {videoCredit.classList.remove('hidden');}if (imageCredit) {imageCredit.classList.add('hidden');}};const hideVideoCredit = () => {if (videoCredit) {videoCredit.classList.add('hidden');}if (imageCredit) {imageCredit.classList.remove('hidden');}};// Looping videos do not trigger ended events and manually looping// videos from JS is disabled in many browsers. The canplaythrough event here// is (approximately) mimicking an ended event for loops.backgroundVideo.addEventListener('canplaythrough', () => {if (playCounter >= timesToLoop) {backgroundVideoContainer.classList.remove('b-video-background--fade');backgroundVideo.pause();hideVideoCredit();} else {backgroundVideoContainer.classList.add('b-video-background--fade');playCounter += 1;showVideoCredit();}});const pauseHiddenVideo = () => {// offsetHeight always equals 0 if an element is hiddenif (backgroundVideoContainer.offsetHeight === 0) {backgroundVideo.pause();hideVideoCredit();} else {backgroundVideo.play();showVideoCredit();}};window.addEventListener('load', () => {pauseHiddenVideo();});window.addEventListener('resize', () => {pauseHiddenVideo();});if (stopButton) {stopButton.onclick = () => {backgroundVideo.pause();backgroundVideoContainer.classList.remove('b-video-background--fade');if (backgroundVideo.paused) {stopButton.classList.add('hidden');hideVideoCredit();}};}}","const cookieBanner = document.querySelector('.js-cookie-banner');if (cookieBanner) {const closeButton = document.querySelector('.js-cookie-banner-close');window.onload = () => {cookieBanner.classList.remove('b-cookie-banner--hidden');};closeButton.onclick = (event) => {event.preventDefault();cookieBanner.classList.add('b-cookie-banner--hidden');};}","import cookies from 'browser-cookies';const modals = document.querySelectorAll('.js-modal');function modalTracking (category, action) {window.dataLayer = window.dataLayer || [];window.dataLayer.push({event: 'myClick',category,action});}Array.from(modals, (modal) => {const modalCampaign = modal.dataset.modalCampaign;if (!modal.dataset.modalOnceOnly || !cookies.get(modalCampaign)) {document.body.appendChild(modal);modal.classList.add('b-modal--active');modalTracking(modalCampaign, 'pop-up displayed');}modal.addEventListener('click', (e) => {if (modal.dataset.modalOnceOnly) {cookies.set(modalCampaign, 'seen', { domain: modal.dataset.modalDomain, expires: 365 });}if (e.target !== modal) {const modalAction = modal.querySelector('.js-modal-action');if (e.target === modalAction) {modalTracking(modalCampaign, `clicked: ${modalAction.textContent}`);} else {modalTracking(modalCampaign, 'pop-up dismissed');modal.remove();}}});return true;});","function isEmail (t) {const e = /^([\\w-]+(?:\\.[\\w-]+)*)@((?:[\\w-]+\\.)*\\w[\\w-]{0,66})\\.([a-z]{2,6}(?:\\.[a-z]{2})?)$/i;return e.test(t);}Array.from(document.querySelectorAll('.js-newsletter_form'), (signupForm) => {signupForm.addEventListener('submit', (e) => {e.preventDefault();const emailField = signupForm.querySelector('.js-emailValidation');const emailDescriptor = signupForm.querySelector('.js-newsletter__descriptor');const emailBtn = signupForm.querySelector('.js-newsletter__submit');const httpRequest = new XMLHttpRequest();let formInputs = '';if (isEmail(emailField.value)) {if (!httpRequest) {signupForm.submit();}Array.from(signupForm.querySelectorAll('input'), (ip) => {formInputs += `${ip.name}=${encodeURIComponent(ip.value)}&`;return true;});httpRequest.onreadystatechange = () => {if (httpRequest.readyState === XMLHttpRequest.DONE) {if (httpRequest.status === 200) {emailBtn.value = 'Thank you!';emailDescriptor.innerHTML ='A confirmation email will be sent to this address shortly&hellip;';signupForm.classList.remove('invalid');signupForm.classList.add('sent');} else {signupForm.submit();}}};httpRequest.open('POST', signupForm.action);httpRequest.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');httpRequest.send(formInputs);} else {emailDescriptor.innerHTML = \"That doesn't look like an email address&hellip;\";signupForm.classList.add('invalid');}});return true;});","/* eslint-disable no-underscore-dangle */(() => {const oicSeeds = Array.from(document.querySelectorAll('.js-object-image-overlay-item'));if (oicSeeds.length) {const oic = document.querySelector('.b-object-image-overlay') || document.createElement('div');document.body.appendChild(oic);oic.classList.add('b-object-image-overlay');oic.setAttribute('tabindex', 0);oic.innerHTML = `<a class=\"b-object-image-overlay__dismiss\" title=\"Close\" aria-label=\"Close\"></a><div class=\"b-object-image-overlay__items\"></div>`;const items = oic.querySelector('.b-object-image-overlay__items');oic.addItem = (index, prepend = false) => {const seed = oicSeeds[index] || oicSeeds[0];const data = seed.dataset.objectImageOverlay ?JSON.parse(seed.dataset.objectImageOverlay): null;const museumNumber = data && data.museumNumber ?`Museum number: <span itemprop=\"identifier\">${data.museumNumber}</span>`: '';const copyright = data && data.copyright ?`<br/><span itemprop=\"copyrightHolder\">${data.copyright}</span>`: '';const numberCopyright = museumNumber || copyright ?`<div class=\"b-object-image-overlay__numbercopyright\">${museumNumber}${copyright}</div>`: '';const onDisplay = data && data.onDisplay ?`<div class=\"b-object-image-overlay__location-status\"><svg role=\"img\" id="on-display" viewBox="0 0 52 52"><path d="M51.59 25.348C45.15 15.57 35.838 10 26 10S6.851 15.57.41 25.348L0 26l.41.652C6.85 36.43 16.162 42 26 42s19.149-5.57 25.59-15.348L52 26l-.41-.652zM25.5 35c-5.225 0-9.5-4.275-9.5-9.5s4.275-9.5 9.5-9.5 9.5 4.275 9.5 9.5-4.275 9.5-9.5 9.5z" fill="currentColor"/></svg>On display</div>`: '';let locationCopy = '';if (data && data.onDisplay) {locationCopy = data.displayOverride;if (!locationCopy) {const locationSite = data.locationSite ?`<div class=\"b-object-image-overlay__location-site\">${data.locationSite}</div>`: '';const locationRoom = data.locationRoom ?data.locationRoom: '';locationCopy = locationSite + locationRoom;}} else if (data && data.onDisplay !== null && !data.onDisplay) {locationCopy = data.storageOverride || 'This object is currently not on display';}const visitLink = data && data.visitUrl ?`<a class=\"b-object-image-overlay__visit\" href=\"${data.visitUrl}\" data-tracking-oic=\"visit the object\">Find out how to visit this object</a>`: '';const location = locationCopy || visitLink ?`<div class=\"b-object-image-overlay__location\">${onDisplay}<div class=\"b-object-image-overlay__location-copy\">${locationCopy}</div>${visitLink}</div>` : '';const objectUrl = seed.querySelector('a').href;const ctaScreen = objectUrl.length > 1 ?`<br/><a class=\"b-object-image-overlay__cta b-object-image-overlay__cta--screen\" href=\"${objectUrl}\" data-tracking-oic=\"explore the object\">Explore object in more depth</a>`: '';const ctaMobile = objectUrl.length > 1 ?`<a class=\"b-object-image-overlay__cta b-object-image-overlay__cta--mobile\" href=\"${objectUrl}\" data-tracking-oic=\"explore the object\">Explore object in more depth</a>`: '';const item = document.createElement('div');item.classList.add('b-object-image-overlay__item');item.innerHTML += `<div class=\"b-object-image-overlay__content\"><figure class=\"b-object-image-overlay__figure\"><img class=\"b-object-image-overlay__image\"itemprop=\"contentUrl\"alt=\"${seed.querySelector('img').alt}\"sizes=\"(max-width: 991px) calc(100vw - 20px),(min-width: 992px) calc(70vw - 145px),(min-width: 1200px) 710px\"srcset=\"${seed.querySelector('img').srcset}\"src=\"${seed.querySelector('img').src}\"><figcaption class=\"b-object-image-overlay__figcaption\">${numberCopyright}<div class=\"b-object-image-overlay__prevnext\"><a class=\"b-object-image-overlay__prev b-object-image-overlay__prev--disabled\" href=\"#\" title=\"Previous\" aria-label=\"Previous\" data-tracking-oic=\"previous object\"><svg role=\"img\" id="point-left" viewBox="0 0 100 100"><path fill="none" d="M-1-1h582v402H-1z"/><g><path d="M70.173 12.294L57.446.174l-47.62 50 47.62 50 12.727-12.122-36.075-37.879z" fill="currentColor" fill-rule="nonzero"/></g></svg></a><a class=\"b-object-image-overlay__next b-object-image-overlay__next--disabled\" href=\"#\" title=\"Next\" aria-label=\"Next\" data-tracking-oic=\"next object\"><svg role=\"img\" id="point-right" viewBox="0 0 100 100"><path fill="none" d="M-1-1h582v402H-1z"/><g><path d="M20 88.052l12.727 12.121 47.62-50-47.62-50L20 12.294l36.075 37.88z" fill="currentColor" fill-rule="nonzero"/></g></svg></a></div></figcaption></figure><div class=\"b-object-image-overlay__details\"><div class=\"b-object-image-overlay__caption\">${seed.querySelector('figcaption').textContent}${ctaScreen}</div>${location}${ctaMobile}</div></div>`;if (prepend) {items.insertBefore(item, items.firstElementChild);} else {items.appendChild(item);}const itemPrev = item.querySelector('.b-object-image-overlay__prev');const itemNext = item.querySelector('.b-object-image-overlay__next');if (index > 0) {itemPrev.classList.add('b-object-image-overlay__prev--enabled');}if (index < oicSeeds.length - 1) {itemNext.classList.add('b-object-image-overlay__next--enabled');}};oic.getIndex = (seed) => {const index = oicSeeds.findIndex((el) => {const match = (el === seed);return match;});return index;};oic.clipItem = (last = false) => {if (last) {items.lastElementChild.remove();} else {items.firstElementChild.remove();}};oic.advance = (rewind = false) => {if ((!rewind && oic._index < oicSeeds.length - 1)|| (rewind && oic._index > 0)) {oic.clipItem(rewind);oic.addItem(oic._index + (2 * (rewind ? -1 : 1)), rewind);oic._index += (1 * (rewind ? -1 : 1));oic.track(oic._index);}};oic.track = (index) => {window.dataLayer = window.dataLayer || [];window.dataLayer.push({event: 'OIC',object: oicSeeds[index].querySelector('figcaption').textContent.trim(),museumNumber: JSON.parse(oicSeeds[index].dataset.objectImageOverlay).museumNumber});};document.addEventListener('click', (e) => {if (e.target.closest('.js-object-image-overlay-item')) {e.preventDefault();const seed = e.target.closest('.js-object-image-overlay-item');oic._index = oic.getIndex(seed);oic.addItem(oic._index);oic.classList.add('b-object-image-overlay--active');oic.addItem(oic._index + 1);oic.addItem(oic._index - 1, true);oic.focus();oic.track(oic._index);const keyHandle = (e3) => {if (e3.key === 'ArrowLeft') {e3.preventDefault();oic.advance(true);} else if (e3.key === 'ArrowRight') {e3.preventDefault();oic.advance();}};document.addEventListener('keydown', keyHandle, false);oic.onclick = (e2) => {if (e2.target.matches('.b-object-image-overlay__item, .b-object-image-overlay__dismiss')) {e2.preventDefault();oic.classList.remove('b-object-image-overlay--active');items.innerHTML = '';oic.onclick = null;document.removeEventListener('keydown', keyHandle, false);} else if (e2.target.closest('.b-object-image-overlay__next--enabled')) {e2.preventDefault();oic.advance();} else if (e2.target.closest('.b-object-image-overlay__prev--enabled')) {e2.preventDefault();oic.advance(true);}};}}, false);}})();/* eslint-enable no-underscore-dangle */","/* eslint-disable no-underscore-dangle */(() => {const shuffler = {init: (el) => {const shufflerData = JSON.parse(el.dataset.objectShuffler);const deckTemplate = el.querySelector('.js-object-shuffler__deck');const itemTemplate = deckTemplate.firstElementChild.firstElementChild;const imgTemplate = itemTemplate.firstElementChild;const slideSize = shuffler.setSize(itemTemplate);const transitionDurationItem = parseFloat(window.getComputedStyle(itemTemplate).getPropertyValue('transition-duration'));const transitionDurationImg = parseFloat(window.getComputedStyle(imgTemplate).getPropertyValue('transition-duration'));const deckTabs = el.querySelector('.js-object-shuffler__tabs');// clone initial html markup into a full set of decksfor (let i = 1; i < shufflerData.length; i += 1) {const deck = deckTemplate.parentNode.appendChild(deckTemplate.cloneNode(true));deck.removeAttribute('active');}// populate each deck with slides of itemslet i = 0;Array.from(el.querySelectorAll('.js-object-shuffler__deck'), (deck) => {deck._props = {slideSize,itemsData: shufflerData[i].data || [],itemsDataFeed: shufflerData[i].feed,itemsIndex: 0,transitionDurationItem,transitionDurationImg};// create deck tab linkconst tabLink = deckTabs.appendChild(document.createElement('a'));tabLink.className = 'b-object-shuffler__tab-link';tabLink.innerHTML = shufflerData[i].title;tabLink.title = `filter by ${shufflerData[i].title}`;if (i === 0) { tabLink.setAttribute('active', true); }tabLink.onclick = () => {deckTabs.querySelector('[active]').removeAttribute('active');tabLink.setAttribute('active', true);el.querySelector('.js-object-shuffler__deck[active]').removeAttribute('active');deck.setAttribute('active', true);};shuffler.getData(deck).then(() => {const slide = deck.firstElementChild;// clone initial html markup for an item to make a whole slidefor (let j = 1; j < slideSize; j += 1) {slide.appendChild(itemTemplate.cloneNode(true));}// next slide transitions require an activating/deactivating pair of slides,// plus a next slide ready and waiting (= 3 slides)slide.removeAttribute('active');const activeSlide = shuffler.newSlide(deck);activeSlide.setAttribute('active', true);shuffler.newSlide(deck);});i += 1;return true;});document.addEventListener('click', (e) => {if (e.target.closest('.js-object-shuffler__more')) {e.preventDefault();shuffler.nextSlide(el.querySelector('.js-object-shuffler__deck[active]'));}}, false);},setSize: (item) => {// number of columns determined by item width * 2 rowsconst cols = Math.floor(item.parentNode.getBoundingClientRect().width / item.getBoundingClientRect().width);return cols * 2;},getData: (deck) => {// append more data from search APIif (deck._props.itemsData.length < deck._props.itemsIndex + (2 * deck._props.slideSize)) {const dataURI = deck._props.itemsDataFeed.replace(/offset=[^&]+/, `offset=${deck._props.itemsData.length}`);const promise = fetch(dataURI).then(response => response.json()).then((data) => {// deck._props.itemsData = [...deck._props.itemsData, ...data];Array.from(data.records, (record) => {const imgPath = `https://media.vam.ac.uk/media/thira/collection_images/${record.fields.primary_image_id.substring(0, 6)}/${record.fields.primary_image_id}.jpg`;deck._props.itemsData.push({img: {srcset: `${imgPath} 320w, ${imgPath} 640w, ${imgPath} 960w`,src: imgPath,alt: record.fields.title},title: record.fields.title,href: `http://d3dn4d27rggz6y.cloudfront.net/item/${record.fields.object_number}/index.html`});return true;});}).catch(status, err => console.log(status, err)); // eslint-disable-line no-consolereturn promise;}return Promise.resolve(true);},newSlide: (deck) => {// append a new slide by cloning the first and populate with new dataconst slide = deck.appendChild(deck.firstElementChild.cloneNode(true));Array.from(slide.children, (item) => {const dataIndex = deck._props.itemsIndex % deck._props.itemsData.length;const img = item.querySelector('img');item.title = deck._props.itemsData[dataIndex].title;item.href = deck._props.itemsData[dataIndex].href;img.srcset = deck._props.itemsData[dataIndex].img.srcset;img.src = deck._props.itemsData[dataIndex].img.src;img.alt = deck._props.itemsData[dataIndex].img.alt;// scatter effectconst scaler = Math.random() * 0.1;const scale = 1 + ((deck._props.itemsIndex % 2 > 0 ? 1 : -1) * scaler);// shift items towards centre to remain in shotconst slot = (deck._props.itemsIndex % deck._props.slideSize);const yDir = slot > (deck._props.slideSize / 2) - 1 ? -1 : 1;let xDir = Math.random() > 0.5 ? 1 : -1;if (slot === 0 || slot === deck._props.slideSize / 2) {// left-hand colxDir = 1;} else if (slot === (deck._props.slideSize / 2) - 1 || slot === deck._props.slideSize - 1) {// right-hand colxDir = -1;}const x = (slot % (deck._props.slideSize / 2)) * (100 / (deck._props.slideSize / 2));const y = slot < deck._props.slideSize / 2 ? 0 : 50;const aspect = 1 || img.naturalHeight / img.naturalWidth;const jitterX = xDir * scaler * 34 * aspect;const jitterY = (yDir * scaler * 74) / aspect;item.style.width = 'auto';item.style.height = `${(scale / aspect) * 50}%`;item.style.position = 'absolute';item.style.left = `${x + jitterX}%`;item.style.top = `${y + jitterY}%`;item.style.transitionDuration = `${deck._props.transitionDurationItem * scale * scale}s`;img.style.transitionDuration = `${deck._props.transitionDurationImg * scale * scale}s`;deck._props.itemsIndex += 1;return true;});shuffler.getData(deck);return slide;},nextSlide: (deck) => {shuffler.newSlide(deck);deck.firstElementChild.remove();const active = deck.querySelector('[active]');active.removeAttribute('active');active.nextSibling.setAttribute('active', true);}};let observer = null;if ('IntersectionObserver' in window) {const lazyLoad = ([e]) => {if (e.intersectionRatio > 0) {const myComponent = e.target;observer.unobserve(myComponent);if (!myComponent.initialised) {shuffler.init(myComponent);myComponent.initialised = true;}}};observer = new IntersectionObserver(lazyLoad, { rootMargin: '0px 0px 1000px 0px' });}// lazy load component if possibledocument.addEventListener('DOMContentLoaded', () => {Array.from(document.querySelectorAll('.js-object-shuffler'), (myComponent) => {try {observer.observe(myComponent);} catch (e) {shuffler.init(myComponent);}return true;});}, true);})();/* eslint-enable no-underscore-dangle */","// To draw the coloured underline beneath the input field valueconst searchInput = document.querySelector('.js-search-input');const searchUnderscore = document.querySelector('.js-search-underscore');const searchSubmit = document.querySelector('.js-search-submit');const searchClear = document.querySelector('.js-search-clear');function searchDecorate () {searchUnderscore.innerHTML = searchInput.value.replace(/\\s/g, '&nbsp;');}function searchInit () {searchSubmit.classList.add('b-search-form__submit--hidden');if (searchInput.value.length) {searchClear.classList.remove('b-search-form__clear--hidden');}}function searchActivate () {searchClear.classList.add('b-search-form__clear--hidden');if (searchInput.value.length) {searchSubmit.classList.remove('b-search-form__submit--hidden');} else {searchSubmit.classList.add('b-search-form__submit--hidden');}}function searchReset () {searchClear.classList.add('b-search-form__clear--hidden');searchInput.value = '';searchDecorate();}if (searchInput) {searchInput.focus();searchInit();searchDecorate();searchInput.addEventListener('input', searchDecorate);searchInput.addEventListener('input', searchActivate);searchClear.addEventListener('click', searchReset);}","const searchResultTextEls = document.querySelectorAll('.js-search-result-text');function searchResultTextTruncate (textEl) {textEl.innerHTML = textEl.textFull;if (textEl.scrollHeight - textEl.clientHeight > 10) {const focus = textEl.textFull.indexOf('</em>');const maxChars = (textEl.clientHeight / textEl.scrollHeight) * textEl.textFull.length;const shunt = focus - maxChars;let firstChar = 0;let lastChar = textEl.textFull.lastIndexOf(' ', maxChars);let prepend = '';if (shunt > 0) {prepend = '&hellip;';firstChar = textEl.textFull.indexOf(' ', shunt + 20) + 1;lastChar = textEl.textFull.lastIndexOf(' ', maxChars + shunt + 20);}textEl.innerHTML = `${prepend}${textEl.textFull.substring(firstChar, lastChar)}&hellip;`;}}if (searchResultTextEls.length) {Array.from(searchResultTextEls, (textEl) => {textEl.textFull = textEl.innerHTML;searchResultTextTruncate(textEl);window.addEventListener('resize', searchResultTextTruncate.bind(this, textEl), false);return true;});}","import querystring from 'querystring';const toggleNav = document.querySelector('.js-toggle-nav');if (toggleNav) {const toggleNavBtns = toggleNav.querySelectorAll('.js-toggle-nav-btn');const qs = querystring.parse(window.location.search.replace('?', ''));const qsToggleType = qs.type;Array.from(toggleNavBtns, (tog) => {const tnToggees = document.querySelectorAll(tog.dataset.toggeesSelector);tog.addEventListener('click', (e) => {e.preventDefault();const togType = tog.dataset.toggleType;toggleNav.scrollLeft = tog.offsetLeft- ((toggleNav.getBoundingClientRect().width - tog.getBoundingClientRect().width) / 2);if (!tog.preventHistoryPush) {window.history.pushState({ toggleNavType: togType }, '', `?type=${togType}`);}tog.preventHistoryPush = false;Array.from(tnToggees, (el) => {el.classList.add('s-visually-hidden');if (el.dataset.toggleType === togType) {el.classList.remove('s-visually-hidden');}return true;});Array.from(toggleNavBtns, (el) => {el.classList.remove('b-toggle-nav__button--active');return true;});tog.classList.add('b-toggle-nav__button--active');}, false);if (tog.dataset.toggleType === qsToggleType) {tog.preventHistoryPush = true;setTimeout(() => { tog.click(); }, 50);}return true;});window.addEventListener('popstate', (e) => {Array.from(document.querySelectorAll('s-visually-hidden'), (el) => {el.classList.remove('s-visually-hidden');return true;});if (e.state && e.state.toggleNavType) {Array.from(toggleNavBtns, (tog) => {if (e.state.toggleNavType === tog.dataset.toggleType) {tog.preventHistoryPush = true;tog.click();}return true;});}return true;}, false);if (!qsToggleType && typeof toggleNav.dataset.toggleTypeDefault !== 'undefined') {document.querySelector(`[data-toggle-type=${toggleNav.dataset.toggleTypeDefault}]`).click();}}","const videoThumbs = document.querySelectorAll('.js-video-thumbnail');Array.from(videoThumbs, (vidThumb) => {vidThumb.addEventListener('click', (e) => {e.preventDefault();const popup = document.createElement('div');const popupClose = document.createElement('div');popup.className = 'b-video-thumbnail__popup';popup.innerHTML = `<iframe class=\"b-video-thumbnail__popup-iframe\" width=\"90%\" height=\"90%\" src=\"${vidThumb.href}\"&playsinline=1\" frameborder=\"0\" allowfullscreen></iframe>`;popup.addEventListener('click', () => {popup.remove();});popupClose.className = 'b-video-thumbnail__popup-close';popupClose.innerHTML = `<svg role=\"img\" id="close" viewBox="0 0 100 100"><path d="M50 39.254L10.749 0 0 10.742l39.251 39.254L0 89.251 10.749 100 50 60.746 89.251 100 100 89.243 60.749 49.99 100 10.734 89.244 0 49.992 39.254z" fill="currentColor" fill-rule="evenodd"/></svg>`;popup.appendChild(popupClose);document.body.appendChild(popup);});return true;});","const videoTrailer = document.querySelector('.js-video-trailer');if (videoTrailer) {const previewImage = videoTrailer.querySelector('.js-video-trailer-preview');const popup = document.createElement('div');const videoHeightRatio = 0.5625;videoTrailer.addEventListener('click', (e) => {e.preventDefault();popup.className = 'b-video-trailer__image';popup.innerHTML = `<iframe class=\"\" width=\"100%\" height=\"100%\" src=\"${videoTrailer.href}\"&playsinline=1\" frameborder=\"0\" allowfullscreen></iframe>`;previewImage.remove();videoTrailer.appendChild(popup);popup.style.height = `${popup.offsetWidth * videoHeightRatio}px`;});window.addEventListener('resize', () => {popup.style.height = `${popup.offsetWidth * videoHeightRatio}px`;});}","const gridRevealMore = document.querySelectorAll('.js-grid-reveal-more');if (gridRevealMore.length) {Array.from(gridRevealMore, (gridBlock) => {const noOfItemsToShow = gridBlock.dataset.revealMoreCounter || 4;if (noOfItemsToShow < gridBlock.childElementCount) {const svgURL = gridBlock.dataset.iconUrl;const gridItems = [...gridBlock.children];const theme = gridBlock.dataset.revealMoreTheme || 'dark';const tracking = gridBlock.dataset.revealMoreTracking || '';let putAfter = gridBlock;if (gridBlock.dataset.revealMorePutAfter) {putAfter = document.querySelector(gridBlock.dataset.revealMorePutAfter);}// Hide all but the first `noOfItemsToShow`gridItems.slice(noOfItemsToShow).forEach(el => el.classList.add('s-visually-hidden'));// Add in a show more button at the bottomconst gridFooterMarkup = document.createElement('footer');gridFooterMarkup.setAttribute('class', `b-block-grid__footer b-block-grid__footer--${theme}`);gridFooterMarkup.innerHTML = `<a href=\"#\" data-tracking-showmorebutton=\"${tracking}\" class=\"js-reveal-more-btn\"><div class=\"b-icon-badge b-icon-badge--small b-icon-badge--${theme}\"><div class=\"b-icon-badge__icon s-themed s-themed--background-color s-themed--background-color--hover\"><svg role=\"img\"><use xlink:href=\"${svgURL}#plus\"></use></svg></div><small class=\"b-icon-badge__label\">Show more</small></div></a>`;putAfter.parentNode.insertBefore(gridFooterMarkup, putAfter.nextSibling);// Hook up an event listener on that buttongridBlock.revealMoreClicks = 0;gridFooterMarkup.addEventListener('click', (e) => {e.preventDefault();gridBlock.revealMoreClicks += 1;// Filter down to just the hidden itemsconst hiddenItems = gridItems.filter(el => el.classList.contains('s-visually-hidden'));hiddenItems.slice(0, noOfItemsToShow).forEach(el => el.classList.remove('s-visually-hidden'));// Remove the footer if we're not going to need the button after thisif (hiddenItems.length <= noOfItemsToShow) gridFooterMarkup.remove();}, false);}return true;});window.addEventListener('beforeunload', () => {const revealMoreClicks = [];Array.from(gridRevealMore, (gridBlock) => {revealMoreClicks.push(gridBlock.revealMoreClicks);return true;});history.replaceState({ revealMoreClicks }, 'revealMoreClicks');}, false);window.addEventListener('load', () => {if (history.state && history.state.revealMoreClicks) {const buttons = document.querySelectorAll('.js-reveal-more-btn');for (let r = 0; r < history.state.revealMoreClicks.length; r += 1) {let c = 0;while (c < history.state.revealMoreClicks[r]) {buttons[r].click();c += 1;}}}}, false);}","function polyfillObjectFit () {const objectFitContainer = document.querySelectorAll('.js-object-fit-container');[].forEach.call(objectFitContainer, (els) => {if (els.getElementsByTagName('img')[0]) {const imgEl = els.getElementsByTagName('img')[0];imgEl.addEventListener('load', () => {const imgUrl = imgEl.src;if (imgUrl) {els.classList.add('js-object-fit-container--fallback');els.style.backgroundImage = `url('${imgUrl}')`;}});}});}if (typeof Modernizr !== 'undefined') {Modernizr.on('objectfit', (r) => {if (!r) polyfillObjectFit();});}"]}